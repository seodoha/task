<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Select</title>
    <style>
        * {margin: 0;padding: 0;box-sizing: border-box;}
        li {list-style: none;}
        body {background-color: wheat;}
        section {position: absolute;left: 50%;top: 10px;transform: translateX(-50%);}
        .hide-select {position: absolute;overflow: hidden;width: 0;height: 0;border: 0;}
        .customSelectWrap {position: relative;width: 200px;}
        .customSelectWrap strong {display: block;position: relative;padding: 0 38px 0 10px;line-height: 38px;border: 1px solid #ddd;background-color: #f8f8f8;overflow: hidden;text-overflow: ellipsis;user-select: none;font-weight: 400;font-size: 12px;cursor: pointer;white-space: nowrap;}
        .customSelectWrap strong::after {content: " ";position: absolute;right: 10px;top: 50%;transform: translateY(-50%);width: 0;height: 0;border: 4px solid transparent;border-top-color: #BBB;border-bottom: none;}
        .customSelectWrap ul {display: none;border: 1px solid #ddd;}
        .customSelectWrap ul li {padding: 10px;font-size: 12px;line-height: 20px;background-color: #f8f8f8;cursor: pointer;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;}
        .customSelectWrap ul li.select,
        .customSelectWrap ul li:hover {background-color: #D0D0D0;}
        .customSelectWrap ul li ~ li {border-top: 1px solid #ddd;}
    </style>
    <script src="../jquery-1.12.0.min.js"></script>
</head>
<body>
    <section>
        <select data-module="customSelect">
            <option value="realmadrid">레알마드리드</option>
            <option value="barcelona">바르셀로나</option>
            <option value="valencia" selected>발렌시아</option>
            <option value="atmadrid">아틀레티코마드리드</option>
            <option value="sevilla">세비야</option>
        </select>
        <br><br>
        <select data-module="customSelect">
            <option value="">인터밀란</option>
            <option value="">유벤투스</option>
            <option value="">AC밀란</option>
            <option value="">로마</option>
        </select>
    </section>
    <script>
        $('[data-module]').length && customSelect();
        
        function customSelect() {
            var $el = $('[data-module="customSelect"]');

            $el.each(function(index, elItem) {
                var itemW = $(elItem).width(),
                    $customSelect = '<div class="customSelectWrap">',
                    $lab = '<strong class="label">',
                    $opt = '<ul class="select-item">';
                
                if ( $(elItem).find('option').length > 0 ) {
                    $(elItem).find('option').each(function(index, item) {
                        var itemTxt = $(item).text();

                        if ( $(item).prop('selected') ) {
                            $lab += (itemTxt + '</strong>');
                            $opt += '<li data-index="' + index + '" class="select">' + itemTxt + '</li>';
                        } else {
                            $opt += '<li data-index="' + index + '">' + itemTxt + '</li>';
                        }

                    });
                    $opt += '</ul>';
                }
                
                $customSelect = $customSelect + $lab + $opt + '</div>';
                $(elItem).addClass('hide-select').after($customSelect);
                
            })
        }

        $('.customSelectWrap strong').on('click', function(){
            $(this).siblings('ul').stop().slideToggle('fast');
        });

        $('.select-item li').on('click', function(){
            var $parent = $(this).parent(),
                $txt = $(this).text(),
                $select = $(this).closest('.customSelectWrap').prev(),
                index = $(this).index();

            $parent.find('li').removeClass('select');
            $(this).addClass('select');
            $parent.stop().slideUp('fast').siblings('.label').text($txt);

            console.log($(this).closest('.customSelectWrap').prev());
            $select.find('option').eq(index).prop('selected', true);
        });
    </script>
    </script>
</body>
</html>